<h1><%= @survey.name %> Results</h1>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js"></script>

<div class="row">
  <% @survey.questions.each do |question| %>
    <div class="col-md-6">
      <h3><%= question.name %></h3>
      <canvas id="chart_<%= question.id %>" width="200" height="200"></canvas>
      <script>
      var ctx = document.getElementById("chart_<%= question.id %>").getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
              labels: <%= question.options.inspect.html_safe %>,
              datasets: [{
                  label: '# of Votes',
                  data: <%= question.results.inspect.html_safe %>,
              }]
          },
          options: {
              scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero:true
                      }
                  }]
              }
          }
      });
      </script>
    </div>
  <% end %>
</div>

